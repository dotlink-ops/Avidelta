# Repo Copilot Instructions

This repository has a custom assistant configuration in `codex-assistant.mjs` that provides deep knowledge of the codebase.

## Using Repo Copilot

The assistant knows:
- ✅ Full Python automation stack (`scripts/daily_v2.py`, etc.)
- ✅ Next.js frontend architecture (App Router, API routes, components)
- ✅ Integration points (Python → JSON → API → UI)
- ✅ Environment setup and configuration
- ✅ Common debugging patterns and solutions

## Debugging Workflow

When asking for help, the assistant follows a systematic 6-step process:

1. **UNDERSTAND**: Read files, check history, identify affected components
2. **REPRODUCE**: Verify issue with test commands, check logs
3. **DIAGNOSE**: Trace code path, check assumptions, consider edge cases
4. **FIX**: Make minimal targeted changes, preserve patterns
5. **VERIFY**: Run test commands, check for regressions
6. **DOCUMENT**: Commit with clear message, update docs

## Core Principles

### Keep Changes Small
```bash
# One logical change per edit
# Test each change before moving on
# Minimal scope - only touch necessary files
```

### Always Get Test Commands
Every fix should come with verification steps:
```bash
# Test Python
python3 scripts/daily_v2.py --demo

# Test Next.js
npm run build

# Test API
curl http://localhost:3000/api/daily-summary

# Full validation
bash scripts/validate.sh
```

### Follow Existing Patterns
- Python: PEP 8, type hints, structured logging
- TypeScript: Strict mode, explicit types, React 19
- Error Handling: Graceful degradation, clear messages

## Example Usage

**Instead of:**
> "Fix the automation script"

**Ask:**
> "The daily_v2.py script isn't finding notes in output/notes/. Can you debug this with test commands?"

**Instead of:**
> "Update the frontend"

**Ask:**
> "The DailySummaryPanel component isn't showing action items. Can you trace the data flow from API to UI?"

## Quick Reference

### Stack
- **Frontend**: Next.js 16 + React 19 + Tailwind 4
- **Backend**: Python 3.11 + OpenAI + GitHub API
- **Deploy**: Vercel (automatic from main)

### Key Files
- `scripts/daily_v2.py` - Main automation runner
- `app/api/daily-summary/route.ts` - JSON API endpoint
- `components/DailySummaryPanel.tsx` - Dashboard UI
- `output/daily_summary.json` - Output data

### Environment Variables
```bash
OPENAI_API_KEY=your-key
GITHUB_TOKEN=your-token
REPO_NAME=owner/repo
OUTPUT_DIR=./output
NOTES_SOURCE=./output/notes
```

### Common Commands
```bash
# Python
source venv/bin/activate
python3 scripts/daily_v2.py --demo

# Next.js
npm run dev        # Local dev
npm run build      # Production build
npm run lint       # ESLint

# Testing
bash scripts/validate.sh
```

---

The assistant is configured to provide systematic debugging, incremental changes, and always include test commands.
